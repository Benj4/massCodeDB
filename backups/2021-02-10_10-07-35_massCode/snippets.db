{"name":"Buscar ${123}","folderId":"42FBVSLT","content":[{"label":"Fragment 1","language":"javascript","value":"//para buscar coincidencias con este formato ${123}\r\n\r\nlet regx = /\\$\\{([0-9]+?)\\}/\r\n"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612279535774},"updatedAt":{"$$date":1612282896501},"_id":"5rr0bBM4HDVnf33I","folder":{"id":"42FBVSLT","name":"Regx","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Distancia geografica entre dos puntos en  metros","folderId":"3pivBo39","content":[{"label":"Fragment 1","language":"javascript","value":"var rad = function(x) {\r\n  return x * Math.PI / 180;\r\n};\r\n\r\nvar getDistance = function(p1, p2) {\r\n  var R = 6378137; // Earthâ€™s mean radius in meter\r\n  var dLat = rad(p2.lat() - p1.lat());\r\n  var dLong = rad(p2.lng() - p1.lng());\r\n  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(rad(p1.lat())) * Math.cos(rad(p2.lat())) *\r\n    Math.sin(dLong / 2) * Math.sin(dLong / 2);\r\n  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  var d = R * c;\r\n  return d; // returns the distance in meter\r\n};"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1597442616178},"updatedAt":{"$$date":1597442639989},"_id":"7eb5qOq3W0ytVWD7","folder":{"id":"3pivBo39","name":"JavaScript","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Buscar nombre de columnas en todas las tablas","folderId":"1lvKjNcQ","content":[{"label":"Fragment 1","language":"sql","value":"select t.table_schema,\r\n       t.table_name\r\nfrom information_schema.tables t\r\ninner join information_schema.columns c on c.table_name = t.table_name \r\n                                and c.table_schema = t.table_schema\r\nwhere c.column_name = 'x' --Nombre de la columna a buscar\r\n      and t.table_schema not in ('information_schema', 'pg_catalog')\r\n      and t.table_type = 'BASE TABLE' --tipo de tabla\r\norder by t.table_schema;"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588286833827},"updatedAt":{"$$date":1612574676758},"_id":"9PjWWBrE5k0fmXLb","folder":{"id":"1lvKjNcQ","name":"Postgres","open":false,"defaultLanguage":"sql"},"tagsPopulated":[]}
{"name":"ssh con .pem","folderId":"ckpLYBKjW","content":[{"label":"Fragment 1","language":"shell","value":"ssh -i ~/keys/secret.pem -l username 191.xxx.xxx.xxx"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612283960161},"updatedAt":{"$$date":1612283969699},"_id":"9l1cL5rTatgFQ7ar","folder":{"id":"ckpLYBKjW","name":"Shell","open":false,"defaultLanguage":"shell"},"tagsPopulated":[]}
{"name":"Filtro Ultimo Dia","folderId":"1lvKjNcQ","content":[{"label":"Fragment 1","language":"pgsql","value":"WITH\r\n    filtered_variabledemedida AS (\r\n      SELECT variabledemedida, valor AS valor_str, horamedicion, tipovariabledemedida, estacionmeteorologica_sensorid\r\n        ,CASE WHEN REGEXP_REPLACE(valor, '\\\\s+$', '')~E'^[+-]?(\\\\\\\\d*\\\\\\\\.)?\\\\\\\\d+$' THEN CAST( valor AS FLOAT) ELSE 0 END as valor\r\n      FROM public.variabledemedida\r\n      WHERE estacionmeteorologica_sensorid = $1\r\n      ${idsTipoMedida} )\r\n\r\n    SELECT variabledemedida, valor, valor_str, horamedicion, tipovariabledemedida, estacionmeteorologica_sensorid\r\n    ,TV.nombre AS nombreTipovariable\r\n      ,U.nombre AS nombreUnidadmedida\r\n   \r\n  FROM filtered_variabledemedida V\r\n  LEFT JOIN public.tipovariabledemedida TV ON TV.id = V.tipovariabledemedida\r\n  LEFT JOIN public.unidadmedida U ON U.id = TV.unidadmedida\r\n  \r\n  WHERE \r\n      --filtro para obtener solo el ultimo dia de mediciones \r\n      horamedicion > ( select horamedicion from filtered_variabledemedida\r\n                  order by horamedicion desc limit 1 ) - interval '1' day\r\n    \r\n  ORDER BY horamedicion DESC"}],"tags":["BApq9Uv21BwH7R4B","uIGA7bA5k1Nb1Ksa","ecE308IHzgHKfkX6","VYs0apu6pr0uE0TJ"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1579557666878},"updatedAt":{"$$date":1579658426346},"_id":"A4lLECtFWhLf7f5Y","folder":{"id":"1lvKjNcQ","name":"Postgres","open":false,"defaultLanguage":"sql"},"tagsPopulated":[{"name":"sql","_id":"BApq9Uv21BwH7R4B","text":"sql"},{"name":"postgis","_id":"uIGA7bA5k1Nb1Ksa","text":"postgis"},{"name":"date","_id":"ecE308IHzgHKfkX6","text":"date"},{"name":"datetime","_id":"VYs0apu6pr0uE0TJ","text":"datetime"}]}
{"name":"Ejecutar funcion solo en el ultimo onChange","folderId":"3pivBo39","content":[{"label":"Fragment 1","language":"javascript","value":"   handlerBuscarRecurso = (ev) => {\r\n\r\n      const inputVal = ev.target.value;\r\n\r\n      clearTimeout( this.timebuscar )\r\n      this.timebuscar = setTimeout( ()=> this.buscarRecurso(inputVal), 500 );\r\n\r\n   }"}],"tags":["zFAttbknrdYoKkmt","GMwyIWPFexn3wthg","r5UZluFlUWOMzWkx","6aj1XwtZUHVrGd3L"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1579623212110},"updatedAt":{"$$date":1579623290670},"_id":"ACP7riY8Py5iIT3V","folder":{"id":"3pivBo39","name":"JavaScript","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[{"name":"react","_id":"zFAttbknrdYoKkmt","text":"react"},{"name":"onChange","_id":"GMwyIWPFexn3wthg","text":"onChange"},{"name":"keyup","_id":"r5UZluFlUWOMzWkx","text":"keyup"},{"name":"timeout","_id":"6aj1XwtZUHVrGd3L","text":"timeout"}]}
{"name":"Listar SP","folderId":"W2ZTQ6eOx","content":[{"label":"Fragment 1","language":"sql","value":"SHOW PROCEDURE STATUS WHERE db = 'nombrebasedatos';"}],"tags":["Wx4A49698HeNq8ag"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612283998065},"updatedAt":{"$$date":1612574813444},"_id":"ADGt7TiHgksG8AbW","folder":{"id":"W2ZTQ6eOx","name":"MySQL","open":false,"defaultLanguage":"sql"},"tagsPopulated":[{"name":"SP","_id":"Wx4A49698HeNq8ag","text":"SP"}]}
{"name":"Password segura","folderId":"42FBVSLT","content":[{"label":"Fragment 1","language":"javascript","value":"// una letra minuscula, una letra mayuscula, un numero y un carcter especial\r\n\r\n\r\nlet regexPassword = /(?=.*\\d)(?=.*\\W+)(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$/;"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1595448299511},"updatedAt":{"$$date":1595448353379},"_id":"Epoi2gM2t6ny1Go0","folder":{"id":"42FBVSLT","name":"Regx","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Eliminar todos los caracteres NO numericos","folderId":"3pivBo39","content":[{"label":"Fragment 1","language":"javascript","value":"const onlyNumber = function( text ) {\r\n \r\n    text = text + '';\r\n    return text.replace(/([^\\d])+/gm,\"\");\r\n    \r\n}"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1580398344702},"updatedAt":{"$$date":1580407480939},"_id":"I3PDJDeLbzfRgBLC","folder":{"id":"3pivBo39","name":"JavaScript","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Decimal separado por coma, maximo 2 decimales","folderId":"42FBVSLT","content":[{"label":"Fragment 1","language":"javascript","value":"// valores validos:\r\n// 123\r\n// 1\r\n// 1,2\r\n// 2,34\r\n// 22,34\r\n// 22,3\r\n\r\nvar regx = /(^\\d*(,[0-9]{0,2})?$)+/"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1580769172575},"updatedAt":{"$$date":1580769313449},"_id":"Ir9AatY2CSKjCDbz","folder":{"id":"42FBVSLT","name":"Regx","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Capitalize todas las palabras","folderId":"3pivBo39","content":[{"label":"Fragment 1","language":"javascript","value":"\r\nconst string = \"aaa BBB Ccc dDD\";\r\n\r\nconst cap_string = string.toLowerCase().replace(/(^\\w{1})|(\\s+\\w{1})/g, letter => letter.toUpperCase());\r\n\r\nconsole.log( cap_string ); // \"Aaa Bbb Ccc Ddd\""}],"tags":["QROSzI5nc2XEdvnz","rCRrwXoIXdXqZRHb"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612555756658},"updatedAt":{"$$date":1612574315867},"_id":"KTT7muzh1faQsphm","folder":{"id":"3pivBo39","name":"JavaScript","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[{"name":"capitalize","_id":"QROSzI5nc2XEdvnz","text":"capitalize"},{"name":"regx","_id":"rCRrwXoIXdXqZRHb","text":"regx"}]}
{"name":"Valores Duplicados","folderId":"W2ZTQ6eOx","content":[{"label":"Fragment 1","language":"sql","value":"-- Find duplicate values in one column\r\n\r\nSELECT \r\n    col, \r\n    COUNT(col)\r\nFROM\r\n    table_name\r\nGROUP BY col\r\nHAVING COUNT(col) > 1;\r\n\r\n\r\n-- Find duplicate values in multiple columns\r\n\r\nSELECT \r\n    col1, COUNT(col1),\r\n    col2, COUNT(col2),\r\n    ...\r\n\r\nFROM\r\n    table_name\r\nGROUP BY \r\n    col1, \r\n    col2, ...\r\nHAVING \r\n       (COUNT(col1) > 1) AND \r\n       (COUNT(col2) > 1) AND \r\n       ..."}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612574462092},"updatedAt":{"$$date":1612574506112},"_id":"KbU709c6ukF0eNt5","folder":{"id":"W2ZTQ6eOx","name":"MySQL","open":false,"defaultLanguage":"sql"},"tagsPopulated":[]}
{"name":"Rut simple ","folderId":"42FBVSLT","content":[{"label":"Fragment 1","language":"text","value":"var regx = /[1-9]{1}[0-9]{6,7}-(k|K|\\d){1}/gm"}],"tags":[],"isFavorites":false,"isDeleted":true,"createdAt":{"$$date":1580398487047},"updatedAt":{"$$date":1580398545185},"_id":"PRr25qYEchzk32U4","folder":{"id":"42FBVSLT","name":"Regx","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"fake JOIN","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"// \"JOIN\" simple, user queda con un array de usuarios\r\n[\r\n  {\r\n    '$lookup': {\r\n      'from': 'users', \r\n      'localField': 'userId', \r\n      'foreignField': '_id', \r\n      'as': 'user'\r\n    }\r\n  }\r\n]\r\n\r\n// \"JOIN\" con busqueda (match) y unwind para eliminar el array de tokenRedgesamData y dejar un solo objeto\r\n[\r\n  {\r\n    '$sort': {\r\n      'createdAt': -1\r\n    }\r\n  }, {\r\n    '$match': {\r\n      'endAttention': {\r\n        '$exists': false\r\n      }\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'tokenRedgesamData', \r\n      'foreignField': '_id', \r\n      'as': 'tokenRedgesamData'\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$tokenRedgesamData'\r\n    }\r\n  }\r\n]\r\n\r\n\r\n"}],"tags":["NmBbnWk2XQ54zovX","3TnR5Obhd1zDNTa6","Ue8nyI1bwSGjWH0d"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1589562732797},"updatedAt":{"$$date":1589563070091},"_id":"Py9JuVT2YTGyv0yS","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"},{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"lookup","_id":"Ue8nyI1bwSGjWH0d","text":"lookup"}]}
{"name":"Rut simple","folderId":"42FBVSLT","content":[{"label":"Fragment 1","language":"javascript","value":"//comianza con un numero que no sea 0\r\n//tiene 7 u 8 caracteres\r\n//tiene guion\r\n//un solo digito despues del guion, k o K\r\n\r\nvar regx = /^([1-9]{1}[0-9]{6,7})(-(k|K|\\d){1})$/g"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1580398564526},"updatedAt":{"$$date":1580398786157},"_id":"UZQjQXBcB5d8NiYE","folder":{"id":"42FBVSLT","name":"Regx","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Match INSERT query","folderId":"42FBVSLT","content":[{"label":"Fragment 1","language":"javascript","value":"// match de la sentencia complete desde INSERT hasta el punto y coma\r\n\r\nvar regx = /^INSERT(?:.+)\\n([\\s\\S]*?)(?:.+\\);)$/"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612284222020},"updatedAt":{"$$date":1612284406032},"_id":"YF9lwGhVj6j5jTos","folder":{"id":"42FBVSLT","name":"Regx","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"dandole de comer al tio benja","folderId":"kysBHmye","content":[{"label":"Fragment 1","language":"javascript","value":"console.log('Tio Benja se la come!');"}],"tags":["rirXDrWDIW6LttAI"],"isFavorites":false,"isDeleted":true,"createdAt":{"$$date":1579653446510},"updatedAt":{"$$date":1579653503901},"_id":"ZFHbEAT5iZwOQbay","folder":{"id":"kysBHmye","name":"BadSongs.rb","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"pene","_id":"rirXDrWDIW6LttAI","text":"pene"}]}
{"name":"POST json con un formulario html","folderId":"AAPrKhEl9","content":[{"label":"Fragment 1","language":"html","value":"<!-- https://systemoverlord.com/2016/08/24/posting-json-with-an-html-form.html -->\r\n\r\n<body onload='document.forms[0].submit()'>\r\n  <form method='POST' enctype='text/plain'>\r\n    <input name='{\"secret\": 1337, \"trash\": \"' value='\"}'>\r\n  </form>\r\n</body>"}],"tags":["kci94lWkOIsXaUXZ","gqwiN6q2rBxkovSg","7buKtbQ4an9TUkQI","pbnwIzIFdVwSOCm0"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1592413481324},"updatedAt":{"$$date":1592413540179},"_id":"appupo25h5pPhbxA","folder":{"id":"AAPrKhEl9","name":"jaksss","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"hack","_id":"kci94lWkOIsXaUXZ","text":"hack"},{"name":"json","_id":"gqwiN6q2rBxkovSg","text":"json"},{"name":"html","_id":"7buKtbQ4an9TUkQI","text":"html"},{"name":"post","_id":"pbnwIzIFdVwSOCm0","text":"post"}]}
{"name":"onChange timeOut","folderId":"3pivBo39","content":[{"label":"Fragment 1","language":"text","value":"   handlerBuscarRecurso = (ev) => {\r\n\r\n      const inputVal = ev.target.value;\r\n\r\n      clearTimeout( this.timebuscar )\r\n      this.timebuscar = setTimeout( ()=> this.buscarRecurso(inputVal), 500 );\r\n\r\n   }"}],"tags":[],"isFavorites":false,"isDeleted":true,"createdAt":{"$$date":1579623176683},"updatedAt":{"$$date":1579623205083},"_id":"eXvjsyIOgZWw0UVb","folder":{"id":"3pivBo39","name":"JavaScript","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[]}
{"name":"Untitled snippet","folderId":null,"content":[{"label":"Fragment 1","value":""}],"tags":[],"isFavorites":false,"isDeleted":true,"createdAt":{"$$date":1579701067199},"updatedAt":{"$$date":1579701067199},"_id":"emcs66To8aOqOU95"}
{"name":"filtro de documentos segun objetos en un array","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"[\r\n  {\r\n    '$set': {\r\n      'category': {\r\n        '$filter': {\r\n          'input': '$category', \r\n          'as': 'cat', \r\n          'cond': {\r\n            '$eq': [\r\n              '$$cat.nameCategory', 'Actividad Conductual'\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    '$match': {\r\n      'category.0': {\r\n        '$exists': true\r\n      }\r\n    }\r\n  }\r\n]"}],"tags":["NS8vbLW1CLVts6VD","3TnR5Obhd1zDNTa6","RhzmgVmV1RYxdD6a"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1596842576981},"updatedAt":{"$$date":1596842637290},"_id":"fbkQ1t94A4mj50bv","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1593101126767},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Copiar carpetasy archivos","folderId":"ckpLYBKjW","content":[{"label":"Fragment 1","language":"shell","value":"#copiar carpeta completa\r\nscp -r /folder/carpeta-local/* usuarioremoto@200.xxx.xxx.xxx:/carpeta/destino/lala/\r\n\r\n#copiar archivo\r\nscp /folder/carpeta-local/*.* usuarioremoto@200.xxx.xxx.xxx:/carpeta/destino/lala/"}],"tags":["AT6Xi4j4PbqTmua0"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612284078753},"updatedAt":{"$$date":1612284202878},"_id":"lsLmjOR43UDnDGMq","folder":{"id":"ckpLYBKjW","name":"Shell","open":false,"defaultLanguage":"shell"},"tagsPopulated":[{"name":"scp","_id":"AT6Xi4j4PbqTmua0","text":"scp"}]}
{"name":"Untitled snippet","folderId":"ckpLYBKjW","content":[{"label":"Fragment 1","language":"text","value":""}],"tags":[],"isFavorites":false,"isDeleted":true,"createdAt":{"$$date":1612283944777},"updatedAt":{"$$date":1612283944777},"_id":"qI0ItbQ45xwYhUGD"}
{"name":"Enjoy the little thinks","folderId":"1lvKjNcQ","content":[{"label":"Fragment 1","language":"pgsql","value":"--Listar todas las tablas con datos tipo enum\r\nselect n.nspname as enum_schema,  \r\n       t.typname as enum_name,  \r\n       e.enumlabel as enum_value\r\nfrom pg_type t \r\n   join pg_enum e on t.oid = e.enumtypid  \r\n   join pg_catalog.pg_namespace n ON n.oid = t.typnamespace"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1579658549006},"updatedAt":{"$$date":1601845185753},"_id":"wpR7mhTinWjlJg7L","folder":{"id":"1lvKjNcQ","name":"Postgres","open":false,"defaultLanguage":"sql"},"tagsPopulated":[]}
{"name":"Convertir codigo hexadecimal ascii a caracter","folderId":"3pivBo39","content":[{"label":"Fragment 1","language":"javascript","value":"function hex_to_ascii(str1)\r\n{\r\n   var hex  = str1.toString();\r\n   var str = '';\r\n   for (var n = 0; n < hex.length; n += 2) {\r\n       str += String.fromCharCode(parseInt(hex.substr(n, 2), 16));\r\n   }\r\n   return str;\r\n}\r\n\r\nconsole.log(hex_to_ascii('0D'))  // salto de linea\r\nconsole.log( JSON.stringify( hex_to_ascii('0D') ) ) // \"\\r\"\r\nconsole.log(hex_to_ascii('3F')) // ?\r\nconsole.log(hex_to_ascii('40')) // @"}],"tags":["zPKqcjdDMQZ5c0pb","rBD9zTvNS0tgqhna"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1579731478004},"updatedAt":{"$$date":1579731844595},"_id":"xEEYAfsOIrL4yTlX","folder":{"id":"3pivBo39","name":"JavaScript","open":false,"defaultLanguage":"javascript"},"tagsPopulated":[{"name":"hexadecimal","_id":"zPKqcjdDMQZ5c0pb","text":"hexadecimal"},{"name":"ascii","_id":"rBD9zTvNS0tgqhna","text":"ascii"}]}
{"name":"Untitled snippet","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"text","value":""}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612872652205},"updatedAt":{"$$date":1612872652205},"_id":"3Y3wxl2UhOLJXw5k"}
{"name":"Untitled snippet","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"text","value":" db.countGroupByDemo.aggregate([\r\n... {\"$group\":{_id:\"$StudentId\",counter:{$sum:1}}}]);"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612872652205},"updatedAt":{"$$date":1612872652246},"_id":"3Y3wxl2UhOLJXw5k","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[]}
{"name":"SELECT COUNT GROUP BY","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"text","value":" db.countGroupByDemo.aggregate([\r\n... {\"$group\":{_id:\"$StudentId\",counter:{$sum:1}}}]);"}],"tags":[],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1612872652205},"updatedAt":{"$$date":1612872654093},"_id":"3Y3wxl2UhOLJXw5k","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612872667663},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams')."}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874237545},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams')"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874280190},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874281219},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874287274},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorRut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorRut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874289253},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'consultas': {\r\n        '$sum': 1\r\n      }, \r\n      'doctorName': {\r\n        '$first': '$doctorName'\r\n      }\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874625053},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612874633212},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879481940},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n//\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879575171},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados ","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n//\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879576467},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n//\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879580380},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contart","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n//\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879580714},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n//\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879582065},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n//\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879583777},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n// \r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879585142},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n// contar \r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879587553},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n// contar y ob\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879589830},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n// contar \r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879596653},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n// contar\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879598019},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879599077},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612879602457},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\n\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }\r\n]\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880257066},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }\r\n]\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880257405},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate()\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }\r\n]\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880264947},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n)\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }\r\n]\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880266050},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880266945},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880269757},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880270749},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612880973857},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$db.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881238631},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$rut\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"rut\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881293825},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881294669},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881302224},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').map( rut => {} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881877443},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').map( rut => {\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881950832},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').map( rut => {\r\n\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881952773},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').map( rut => {\r\n\r\n  \r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881953862},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').map( rut => {\r\n\r\n\r\n  \r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881955030},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').map( rut => {\r\n\r\n  \r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881955462},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881955812},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  \r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881970232},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams')\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881982808},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881983742},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881987028},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find*\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881987657},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881988785},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find()\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881989350},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find({})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881989834},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find({ })\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612881993917},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find({ doctorRut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882000902},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find({ doctorRut: })\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882001450},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').find({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882002269},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882003522},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882007521},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var todb.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882025183},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tokdb.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882027472},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok =db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882028083},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882028648},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  \r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882029112},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882030194},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print()\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882032090},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print(  )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882033174},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( t )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882034468},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( to )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882034958},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882035417},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok. )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882036927},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882038516},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut,  )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882043980},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut, to )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882045186},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut, tok )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882047283},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut, tok. )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882050441},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut, tok.doctorName )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882051123},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut tok.doctorName )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882055453},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut ++ tok.doctorName )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882105344},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut +  + tok.doctorName )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882106857},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '' + tok.doctorName )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882108047},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882109225},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName ++ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882112919},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName +'+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882122647},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName +''+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882123829},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882125235},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + ' ' + tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882126112},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '' + tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882130229},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882130630},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName +''+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882131236},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  ' + tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882136058},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut + '  '+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882136548},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut +'  '+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882140223},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut +' '+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882141378},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882143908},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  \r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882144370},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var \r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882194050},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882195253},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"nt//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882195936},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"nt//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882196229},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"nt = //donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882196431},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"nt =//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882197623},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"nt//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882198798},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var co\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882199125},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882199480},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count \r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882203818},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = \r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882204532},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882204933},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').find({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ )\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882208607},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').find({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882210682},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882216485},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ count)\r\n\r\n} ).limit\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882362212},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ count)\r\n\r\n} ).limit()\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882370454},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ count)\r\n\r\n} ).limit(2)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882370803},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +' '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882372567},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +' '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882403201},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +''+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882405687},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882408563},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +' '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882408999},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +''+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882410539},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882410893},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +'   '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882411460},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +'  '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882413790},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882414825},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882415177},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882415507},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +'   '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882415846},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +'  '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882416304},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882417073},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +''+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882417677},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882417969},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882420109},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc =\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882752228},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = {}\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882752643},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882753215},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  \r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882754105},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882756877},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":")//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882760160},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":")//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882760460},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882760532},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push()\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882761919},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( tok.doctorRut +' '+ tok.doctorName +'  '+ count )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882765569},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( tok.doctorRut , tok.doctorName +'  '+ count )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882772190},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( tok.doctorRut , tok.doctorName , count )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882775783},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( ruttok.doctorRut , tok.doctorName , count )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882779637},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( rut: tok.doctorRut , tok.doctorName , count )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882787113},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( } )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882788132},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( rut: tok.doctorRut , tok.doctorName , count )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882795923},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , tok.doctorName , count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882796750},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombretok.doctorName , count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882797316},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882802003},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consulcount} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882802481},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultascount} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882806314},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882807821},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\n  \r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882808793},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\n\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882816740},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882817441},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.s\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882818304},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringi\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882819278},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882820276},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify()\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882822041},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882822828},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$17120464-k', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612882824515},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612884255958},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$doctorName'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612884256862},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$patientRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612884264868},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$patientRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$patientRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612884267546},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$patientRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$patientRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$patientRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$patientRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612884270634},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$patientRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$patientRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612885345496},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
{"name":"Buscar Duplicados (y contar)","folderId":"-CGbZKy37","content":[{"label":"Fragment 1","language":"javascript","value":"//donde \"$rut\" es el nombre del campo ( agregando $ al comienzo)\r\n\r\ndb.collection.aggregate(\r\n    [{\"$group\" : { \"_id\": \"$doctorName\", \"count\": { \"$sum\": 1 } } },\r\n    {\"$match\": {\"_id\" :{ \"$ne\" : null } , \"count\" : {\"$gt\": 1} } }, \r\n    {\"$project\": {\"doctorName\" : \"$_id\", \"_id\" : 0} }]\r\n)\r\n\r\nvar acc = []\r\ndb.getCollection('tokenredgesams').distinct('doctorRut').forEach( rut => {\r\n\r\n  var tok = db.getCollection('tokenredgesams').findOne({ doctorRut: rut})\r\n  var count = db.getCollection('tokenredgesams').countDocuments({ doctorRut: rut})\r\n  acc.push( {rut: tok.doctorRut , nombre: tok.doctorName , consultas: count} )\r\n  print( tok.doctorRut +' '+ tok.doctorName +'  '+ count)\r\n\r\n} )\r\n\r\nJSON.stringify(acc)\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$patientRut', \r\n      'patientRut': {\r\n        '$addToSet': '$patientRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$patientRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\ndb.getCollection('tokenredgesams').aggregate(\r\n[\r\n  {\r\n    '$group': {\r\n      '_id': '$doctorRut', \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': true\r\n    }\r\n  }\r\n]\r\n)\r\n\r\n\r\n// contar y obtener informacion\r\ndb.getCollection('tokenredgesams').aggregate([\r\n  {\r\n    '$group': {\r\n      '_id': null, \r\n      'doctorRut': {\r\n        '$addToSet': '$doctorRut'\r\n      }\r\n    }\r\n  }, {\r\n    '$unwind': {\r\n      'path': '$doctorRut', \r\n      'preserveNullAndEmptyArrays': false\r\n    }\r\n  }, {\r\n    '$lookup': {\r\n      'from': 'tokenredgesams', \r\n      'localField': 'doctorRut', \r\n      'foreignField': 'doctorRut', \r\n      'as': 'consultasMedico'\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'numeroConsultas': {\r\n        '$size': '$consultasMedico'\r\n      }, \r\n      'doctorName': {\r\n        '$arrayElemAt': [\r\n          '$consultasMedico', 0\r\n        ]\r\n      }\r\n    }\r\n  }, {\r\n    '$set': {\r\n      'consultasMedico': null, \r\n      'doctorName': '$doctorName.doctorName'\r\n    }\r\n  }\r\n])\r\n\r\n"}],"tags":["3TnR5Obhd1zDNTa6","NmBbnWk2XQ54zovX"],"isFavorites":false,"isDeleted":false,"createdAt":{"$$date":1588964490675},"updatedAt":{"$$date":1612885358617},"_id":"jQ45y2j68a19qmu9","folder":{"id":"-CGbZKy37","name":"MongoDB","open":false,"defaultLanguage":"text"},"tagsPopulated":[{"name":"mongodb","_id":"3TnR5Obhd1zDNTa6","text":"mongodb"},{"name":"aggregate","_id":"NmBbnWk2XQ54zovX","text":"aggregate"}]}
